<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusPark Dashboard</title>
    
    <script src="tailwind.js"></script>
    <script src="mqttws31.min.js"></script>
    
    <link href="googlefontInter.css" rel="stylesheet">
    <link href="MaterialSymbol.css" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen text-slate-800 bg-slate-50 font-sans">

    <div id="toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-[200] toast-notify hidden-toast">
        <div class="bg-green-500 p-1.5 rounded-full flex items-center justify-center transition-colors duration-300" id="toast-bg">
            <div class="bg-white/20 p-1.5 rounded-full flex items-center justify-center">
                <span class="material-symbols-outlined text-white text-lg">check_circle</span>
            </div>
            <div class="flex flex-col px-3">
                <span class="text-[10px] font-bold uppercase tracking-widest text-white/80">Notification</span>
                <span class="text-sm font-semibold text-white" id="toast-message">Action successful</span>
            </div>
        </div>
    </div>

    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-600 p-2 rounded-xl text-white shadow-lg shadow-indigo-200">
                    <span class="material-symbols-outlined">developer_board</span>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-slate-900 leading-none">CampusPark</h1>
                    <span class="text-[10px] text-indigo-600 font-bold uppercase tracking-widest">Live Interface</span>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <button class="flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-xs font-bold uppercase tracking-wider text-slate-600 transition-all" onclick="toggleRegModal()">
                    <span class="material-symbols-outlined text-sm">badge</span>
                    Register
                </button>

                <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-50 text-slate-400 text-[10px] font-black border border-slate-200 transition-colors duration-300" id="connection-status">
                    <span class="w-2 h-2 rounded-full bg-slate-300 status-dot"></span>
                    <span class="status-text uppercase tracking-tighter">Standby</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="stat-card">
                <p class="label">Total Occupied</p>
                <p class="value text-slate-800" id="stat-summary">--</p>
            </div>
            <div class="stat-card">
                <p class="label">Free Spots</p>
                <p class="value text-green-600" id="stat-available">--</p>
            </div>
            <div class="stat-card">
                <p class="label">Gate Status</p>
                <p class="value text-xl text-slate-800 uppercase tracking-tighter mt-1" id="stat-gate">Unknown</p>
            </div>
            <div class="stat-card">
                <p class="label">System</p>
                <p class="value text-indigo-600 text-lg">ONLINE</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <div class="lg:col-span-8 bg-white rounded-[2.5rem] border border-slate-200 shadow-sm p-8">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="font-bold text-xl flex items-center gap-2">
                        <span class="material-symbols-outlined text-indigo-600">view_compact</span>
                        Real-time Layout Monitor
                    </h2>
                    <div class="flex gap-4 text-[10px] font-black uppercase">
                        <div class="flex items-center gap-1.5"><span class="w-3 h-3 bg-green-500 rounded-full"></span> Free</div>
                        <div class="flex items-center gap-1.5"><span class="w-3 h-3 bg-red-500 rounded-full"></span> Occupied</div>
                        <div class="flex items-center gap-1.5"><span class="w-3 h-3 bg-amber-500 rounded-full"></span> Reserved</div>
                    </div>
                </div>
                
                <div class="parking-grid" id="parking-map">
                    <div class="space-y-4">
                        <div class="spot-card available" id="spot-1">
                            <span class="spot-id">A-01</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                        <div class="spot-card available" id="spot-2">
                            <span class="spot-id">A-02</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                        <div class="spot-card available" id="spot-3">
                            <span class="spot-id">A-03</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                    </div>

                    <div class="space-y-4 pt-12">
                        <div class="spot-card h-36 available" id="spot-7">
                            <span class="spot-id">A-07</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                        <div class="h-8"></div>
                        <div class="spot-card h-36 available" id="spot-9">
                            <span class="spot-id">A-09</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                    </div>

                    <div class="space-y-4 pt-12">
                        <div class="spot-card h-36 available" id="spot-8">
                            <span class="spot-id">A-08</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                        <div class="h-8"></div>
                        <div class="spot-card h-36 available" id="spot-10">
                            <span class="spot-id">A-10</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="spot-card available" id="spot-4">
                            <span class="spot-id">A-04</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                        <div class="spot-card available" id="spot-5">
                            <span class="spot-id">A-05</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                        <div class="spot-card available" id="spot-6">
                            <span class="spot-id">A-06</span>
                            <span class="material-symbols-outlined text-4xl icon">directions_car</span>
                            <span class="spot-label">Free</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                
                <div class="bg-slate-900 rounded-[2rem] border border-slate-800 shadow-xl p-6 overflow-hidden relative">
                    <div class="absolute -right-10 -top-10 w-32 h-32 bg-indigo-500/10 blur-3xl"></div>
                    <h3 class="font-bold text-white mb-2 flex items-center gap-2">
                        <span class="material-symbols-outlined text-indigo-400">campaign</span>
                        Notify Blockers
                    </h3>
                    <p class="text-[10px] text-slate-400 mb-4 font-medium uppercase tracking-widest">Enter your licence Plate and all the vehicles that are blocking you will be notified</p>
                    <div class="space-y-4">
                        <div class="relative group">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-500 text-sm group-focus-within:text-indigo-400 transition-colors">subtitles</span>
                            <input class="w-full pl-10 pr-4 py-3.5 bg-slate-950 border border-slate-800 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 text-white font-bold uppercase placeholder:font-normal placeholder:normal-case transition-all" id="move-plate" placeholder="Blocker Plate (e.g. MOS-XY-123)" type="text">
                        </div>
                        <button class="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-2xl shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 active:scale-[0.98]" onclick="sendMoveRequest()">
                            <span class="material-symbols-outlined text-sm">send</span>
                            SEND REQUEST
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-[2rem] border border-slate-200 shadow-sm p-6">
                    <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-indigo-600">gate</span>
                        Barrier Control
                    </h3>
                    <div class="bg-slate-50 rounded-2xl p-6 h-20 mb-4 relative overflow-hidden flex items-end border border-slate-100">
                        <div class="w-2 h-14 bg-red-500 rounded-full gate-animated shadow-sm origin-bottom-left" id="gate-visual"></div>
                        <div class="absolute bottom-5 left-5 w-4 h-4 bg-slate-800 rounded-full border-2 border-white z-10"></div>
                    </div>
                    
                    <div class="mb-3">
                         <input class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm font-bold uppercase" id="gate-plate" placeholder="Your Plate" type="text" value="MOS-TEST-1">
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <button class="py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-md active:scale-95 transition-all" onclick="publishGate('OPEN')">OPEN</button>
                        <button class="py-3 bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold rounded-xl active:scale-95 transition-all" onclick="publishGate('CLOSE')">CLOSE</button>
                    </div>
                </div>

                <div class="bg-white rounded-[2rem] border border-slate-200 shadow-sm p-6 h-64 flex flex-col">
                    <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-slate-400 text-sm">monitor_heart</span>
                        System Health
                    </h3>
                    <div class="flex-grow space-y-2 overflow-y-auto pr-2 text-[10px] font-medium text-slate-500" id="log-stream">
                        <div class="p-2 text-center italic opacity-50">Initializing...</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4 hidden" id="reg-modal">
        <div class="bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200">
            <div class="px-8 py-6 border-b border-slate-100 flex justify-between items-center">
                <h2 class="text-lg font-bold">User Registration</h2>
                <button class="text-slate-400 hover:text-slate-600 transition-colors" onclick="toggleRegModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-8 space-y-4">
                <div>
                    <label class="block text-[10px] font-black text-slate-400 uppercase mb-1.5">Plate</label>
                    <input class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm font-bold uppercase" id="reg-plate" placeholder="MOS-QW-123" type="text">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[10px] font-black text-slate-400 uppercase mb-1.5">Role</label>
                        <select class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm bg-white" id="reg-role">
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="staff">Staff</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] font-black text-slate-400 uppercase mb-1.5">Course</label>
                        <input class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm uppercase" id="reg-course" placeholder="WWI23A" type="text">
                    </div>
                </div>

                <div>
                    <label class="block text-[10px] font-black text-slate-400 uppercase mb-1.5">Phone</label>
                    <input class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm" id="reg-phone" placeholder="+49..." type="text">
                </div>

                <div class="pt-2">
                    <button class="w-full py-4 bg-green-600 text-white font-black rounded-2xl shadow-lg shadow-green-200 hover:bg-green-700 transition-all uppercase text-xs" onclick="submitRegistration()">
                        Send Data (Register/Update)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>